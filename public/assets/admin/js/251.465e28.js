"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[251],{2496:(t,e,a)=>{a.d(e,{Z:()=>n});const l={props:["form"],data:function(){return{}}};const n=(0,a(51900).Z)(l,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-form",{attrs:{model:t.form,"label-position":"top"}},[a("el-form-item",{attrs:{label:"Title"}},[a("el-input",{model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"Description"}},[a("el-input",{attrs:{type:"textarea",rows:"5"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"Keywords"}},[a("el-input",{attrs:{type:"textarea",rows:"3"},model:{value:t.form.keywords,callback:function(e){t.$set(t.form,"keywords",e)},expression:"form.keywords"}})],1)],1)],1)}),[],!1,null,null,null).exports},49251:(t,e,a)=>{a.r(e),a.d(e,{default:()=>n});const l={components:{Seo:a(2496).Z},data:function(){return{articles:[],activeTab:"main",slug:"articles",page_id:null,seo:{title:"",description:"",keywords:""}}},computed:{},methods:{getPage:function(){var t=this;axios.get("/api/admin/page",{params:{slug:this.slug}}).then((function(e){t.page_id=e.data.id,t.seo=e.data.seo,console.log(e.data)}))},submitSeo:function(){axios.post("/api/admin/page/"+this.page_id+"/update",this.seo).then((function(t){console.log(t.data)}))},getArticles:function(){var t=this;axios.get("/api/admin/articles").then((function(e){t.articles=e.data}))},handleDelete:function(t){var e=this;axios.delete("/api/admin/article/"+t).then((function(a){var l=e.articles.findIndex((function(e){return e.id===t}));e.articles.splice(l,1)}))}},mounted:function(){this.getArticles(),this.getPage()}};const n=(0,a(51900).Z)(l,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("h1",[t._v("Статьи")]),t._v(" "),a("el-tabs",{attrs:{type:"card"},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:"Основная информация",name:"main"}},[a("div",{staticClass:"mb-3"},[a("router-link",{attrs:{to:"create"}},[a("el-button",{attrs:{type:"success",icon:"el-icon-plus"}},[t._v("Новая статья")])],1)],1),t._v(" "),a("data-tables",{attrs:{data:t.articles}},[a("el-table-column",{attrs:{type:"index",label:"№"}}),t._v(" "),a("el-table-column",{attrs:{label:"Заголовок",prop:"title",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{label:"Дата",prop:"date",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{label:"Действия"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("router-link",{attrs:{to:"edit/"+e.row.id}},[a("el-button",{attrs:{size:"mini",type:"primary"}},[t._v("\n                        Редактировать\n                    ")])],1),t._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.handleDelete(e.row.id)}}},[t._v("Удалить ")])]}}])})],1)],1),t._v(" "),a("el-tab-pane",{attrs:{label:"Настройки и SEO",name:"config"}},[t.seo?a("Seo",{attrs:{form:t.seo}}):t._e(),t._v(" "),a("el-button",{attrs:{type:"success"},on:{click:function(e){return e.preventDefault(),t.submitSeo.apply(null,arguments)}}},[t._v("Сохранить")])],1)],1)],1)}),[],!1,null,null,null).exports}}]);
//# sourceMappingURL=251.465e28.js.map