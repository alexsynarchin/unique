"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[844],{95844:(r,e,t)=>{function o(r,e){for(var t=0;t<e.length;t++){var o=e[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(r,o.key,o)}}t.d(e,{D:()=>s});var s=function(){function r(){!function(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this.errors={}}var e,t,s;return e=r,(t=[{key:"has",value:function(r){return this.errors.hasOwnProperty(r)}},{key:"any",value:function(){return Object.keys(this.errors).length>0}},{key:"get",value:function(r){if(this.errors[r])return this.errors[r][0]}},{key:"getFlash",value:function(r){if(this.errors[r])return this.errors[r]}},{key:"record",value:function(r){this.errors=r}},{key:"clear",value:function(r){r?this.has(r)&&delete this.errors[r]:this.errors={}}}])&&o(e.prototype,t),s&&o(e,s),Object.defineProperty(e,"prototype",{writable:!1}),r}()},46844:(r,e,t)=>{t.r(e),t.d(e,{default:()=>l});var o=t(20629),s=t(95844);function a(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),t.push.apply(t,o)}return t}function n(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}const i={data:function(){return{showPasswordModal:!1,passwordForm:{password:"",password_confirmation:""},form:{name:"",email:""},errors:new s.D}},computed:function(r){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?a(Object(t),!0).forEach((function(e){n(r,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))}))}return r}({},(0,o.Se)(["userId"])),methods:{changePassword:function(){var r=this;axios.post("/api/admin/user/"+this.userId+"/change-password",this.passwordForm).then((function(e){r.$message({message:e.data,type:"success"}),r.showPasswordModal=!1,r.passwordForm.password="",r.passwordForm.password_confirmation=""})).catch((function(e){r.errors.record(e.response.data.errors)}))},onSubmit:function(){var r=this;axios.post("/api/admin/user/"+this.userId+"/update",this.form).then((function(r){console.log(r.data)})).catch((function(e){r.errors.record(e.response.data.errors)}))},getUser:function(){var r=this;axios.get("/api/admin/user/"+this.userId+"/profile").then((function(e){r.form=e.data}))}},mounted:function(){this.getUser()}};const l=(0,t(51900).Z)(i,(function(){var r=this,e=r.$createElement,t=r._self._c||e;return t("section",[t("h1",[r._v("Профиль пользователя")]),r._v(" "),t("el-card",{staticClass:"box-card col-md-6"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("span",[r._v("Основная информация")])]),r._v(" "),t("el-form",{attrs:{type:"",model:r.form,"label-position":"top"}},[t("el-form-item",{attrs:{label:"Имя",error:r.errors.get("name")}},[t("el-input",{model:{value:r.form.name,callback:function(e){r.$set(r.form,"name",e)},expression:"form.name"}})],1),r._v(" "),t("el-form-item",{attrs:{label:"E-mail",error:r.errors.get("email")}},[t("el-input",{model:{value:r.form.email,callback:function(e){r.$set(r.form,"email",e)},expression:"form.email"}})],1),r._v(" "),t("div",{staticClass:"col-md-6",staticStyle:{"margin-bottom":"22px"}},[t("el-button",{attrs:{icon:"el-icon-unlock",type:"primary"},on:{click:function(e){r.showPasswordModal=!0}}},[r._v("Сменить пароль")])],1),r._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:r.onSubmit}},[r._v("Сохранить")])],1)],1),r._v(" "),t("el-dialog",{attrs:{visible:r.showPasswordModal,title:"Сменить пароль"},on:{"update:visible":function(e){r.showPasswordModal=e}}},[t("el-form",{attrs:{model:r.passwordForm,"label-position":"top"}},[t("div",{staticClass:"row"},[t("el-form-item",{staticClass:"col-md-6",attrs:{label:"Новый пароль",error:r.errors.get("password")}},[t("el-input",{attrs:{"show-password":""},model:{value:r.passwordForm.password,callback:function(e){r.$set(r.passwordForm,"password",e)},expression:"passwordForm.password"}})],1),r._v(" "),t("el-form-item",{staticClass:"col-md-6",attrs:{label:"Подтверждение пароля"}},[t("el-input",{attrs:{"show-password":""},model:{value:r.passwordForm.password_confirmation,callback:function(e){r.$set(r.passwordForm,"password_confirmation",e)},expression:"passwordForm.password_confirmation"}})],1)],1)]),r._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(e){r.showPasswordModal=!1}}},[r._v("Отмена")]),r._v(" "),t("el-button",{attrs:{type:"success"},on:{click:r.changePassword}},[r._v("Сохранить")])],1)],1)],1)}),[],!1,null,null,null).exports}}]);
//# sourceMappingURL=844.f01327.js.map