/*! For license information please see 751.2bb838.js.LICENSE.txt */
(self.webpackChunk=self.webpackChunk||[]).push([[751],{95844:(t,e,s)=>{"use strict";function r(t,e){for(var s=0;s<e.length;s++){var r=e[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}s.d(e,{D:()=>i});var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.errors={}}var e,s,i;return e=t,(s=[{key:"has",value:function(t){return this.errors.hasOwnProperty(t)}},{key:"any",value:function(){return Object.keys(this.errors).length>0}},{key:"get",value:function(t){if(this.errors[t])return this.errors[t][0]}},{key:"getFlash",value:function(t){if(this.errors[t])return this.errors[t]}},{key:"record",value:function(t){this.errors=t}},{key:"clear",value:function(t){t?this.has(t)&&delete this.errors[t]:this.errors={}}}])&&r(e.prototype,s),i&&r(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}()},42751:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>x});const r={props:{selected:{type:Array}},data:function(){return{list:[]}},methods:{getSystemsList:function(){var t=this;axios.get("/api/check-systems").then((function(e){t.list=e.data}))}},mounted:function(){this.getSystemsList()}};var i=s(51900);const n=(0,i.Z)(r,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"report-systems-list"},[s("h3",{staticClass:"report-systems-list__title"},[t._v("\n        Системы проверки:\n    ")]),t._v(" "),s("ul",{staticClass:"report-systems-list__list"},t._l(t.list,(function(e,r){return-1!==t.selected.indexOf(e.id)?s("li",{staticClass:"report-systems-list__item"},[s("section",{staticClass:"report-systems-list-item"},[t._v("\n                "+t._s(e.title)+"\n            ")])]):t._e()})),0)])}),[],!1,null,null,null).exports;var a=s(87757),o=s.n(a),l=s(54028),c=s.n(l),u=s(95844);const p={props:{report:{}},data:function(){return{dialogVisible:!1,fileList:[],form:{unique_percent:0,report_file:""},errors:new u.D}},methods:{handleClose:function(){this.dialogVisible=!1,this.errors.clear("report_file")},openModal:function(){this.dialogVisible=!0},sendReport:function(){var t=this,e=new FormData;e.append("report_file",this.form.report_file),e.append("unique_percent",this.form.unique_percent);axios.post("/api/admin/report/"+this.report.id+"/send",e,{headers:{"content-type":"multipart/form-data"}}).then((function(e){console.log(e.data),t.handleClose(),t.$emit("refresh-data")})).catch((function(e){t.errors.record(e.response.data.errors)}))},handleFileChange:function(t,e){this.form.report_file=t.raw},handleFileRemove:function(t,e){this.form.report_file=""},clearFiles:function(t,e){console.log(t),console.log(this.$refs.upload)}},mounted:function(){this.report.result&&(this.form.unique_percent=this.report.data.unique)}};const _=(0,i.Z)(p,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-dialog",{attrs:{title:"Отправить отчет",visible:t.dialogVisible,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[s("el-form",{attrs:{model:t.form,"label-position":"top"}},[s("el-form-item",{attrs:{label:"Процент уникальности",prop:"unique_percent"}},[s("el-input-number",{attrs:{min:0,max:100},model:{value:t.form.unique_percent,callback:function(e){t.$set(t.form,"unique_percent",e)},expression:"form.unique_percent"}})],1),t._v(" "),s("el-form-item",{attrs:{error:t.errors.get("report_file")}},[s("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"","file-list":t.fileList,limit:1,"on-change":t.handleFileChange,"on-remove":t.handleFileRemove,"on-exceed":t.clearFiles,"auto-upload":!1}},[t.form.report_file?t._e():s("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("Прикрепить файл отчета")]),t._v(" "),s("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"})],1)],1)],1),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("Отмена")]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:t.sendReport}},[t._v("Отправить")])],1)],1)}),[],!1,null,null,null).exports,d={components:{ProgressBar:c(),ReportSend:_},computed:{checkUniqueTypeString:function(){return this.report.check_system.api_id?"Автоматическая проверка":"Ручная проверка"},reportBtnString:function(){return this.report.result?"Отправить отчет заново":"Отправить отчет"}},data:function(){return{check_system:{},increasing_pct:0,decreasing_pct:100}},props:{report:{type:Object},check_unique:{type:Object}},methods:{refreshData:function(){this.$emit("refresh-data")},downloadPdf:function(){var t=this;this.$root.isLoading=!0,axios.post("/api/report/"+this.report.id+"/download").then((function(e){console.log(e.data),t.$root.isLoading=!1;var s=document.createElement("a");s.href=e.data,s.download="report",s.click()})).catch((function(t){console.log(t)}))}},mounted:function(){var t=this;this.check_system=this.report.check_system,this.report.result||setInterval((function(){t.is_paused||(t.random_pct=Math.ceil(100*Math.random()),t.increasing_pct=Math.min(t.increasing_pct+2,100),t.decreasing_pct=Math.max(t.decreasing_pct-2,0))}),3500)}};const h=(0,i.Z)(d,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"report-item"},[s("h3",{staticClass:"report-item__title"},[t._v("\n        Проверка "+t._s(t.report.formatted_date)+"\n    ")]),t._v(" "),t.report.error_code?s("el-alert",{staticClass:"mb-4",attrs:{title:t.report.error,description:"Необходимо отправить отчет в ручном режиме",type:"error","show-icon":""}}):t._e(),t._v(" "),s("div",{staticClass:"report-item__content"},[s("div",{staticClass:"report-item-system"},[s("h4",{staticClass:"report-item-system__title"},[t._v("\n                "+t._s(t.check_system.title)+"\n            ")]),t._v(" "),s("figure",{staticClass:"report-item-system__logo"},[s("img",{attrs:{src:t.check_system.logo}})])]),t._v(" "),s("section",{staticClass:"report-item__center"},[s("div",{staticClass:"d-flex flex-wrap justify-content-between align-items-center"},[s("div",[t.report.result?s("el-tag",{attrs:{type:"success"}},[t._v("\n                        Отчет сформирован\n                    ")]):s("el-tag",{attrs:{type:"warning"}},[t._v("\n                        Отчет не сформирован\n                    ")]),t._v(" "),s("el-tag",{attrs:{type:"primary"}},[t._v(t._s(t.checkUniqueTypeString))])],1),t._v(" "),!t.report.check_system.api_id||t.report.error_code?s("el-button",{attrs:{type:"primary"},on:{click:function(e){return e.preventDefault(),t.$refs.reportSend.openModal()}}},[t._v(t._s(t.reportBtnString))]):t._e()],1),t._v(" "),t.report.result?s("div",[t.report.result?s("div",{staticClass:"report-progress-bar"},[s("progress-bar",{attrs:{"bg-color":"#E3E5ED","bar-color":"#366AF3","bar-border-radius":30,size:"15",val:t.report.data.unique}}),t._v(" "),s("div",{staticClass:"report-progress-bar__text"},[t._v("\n                            Процент уникальности:\n                            "),s("span",{staticClass:"report-progress-bar__precent"},[t._v(t._s(t.report.data.unique+"%"))])])],1):t._e()]):t._e()]),t._v(" "),s("section",{staticClass:"report-item__right"},[s("ul",{staticClass:"report-text-params"},[s("li",{staticClass:"report-text-params__item"},[s("label",{staticClass:"report-text-params__label"},[t._v("\n                        Номер отчета:\n                    ")]),t._v(" "),s("span",{staticClass:"report-text-params__value"},[t._v("\n                        "+t._s(t.check_unique.id)+"\n                    ")])]),t._v(" "),s("li",{staticClass:"report-text-params__item"},[s("label",{staticClass:"report-text-params__label"},[t._v("\n                        Страниц:\n                    ")]),t._v(" "),s("span",{staticClass:"report-text-params__value"},[t._v("\n                        "+t._s(t.report.params.pages)+"\n                    ")])]),t._v(" "),s("li",{staticClass:"report-text-params__item"},[s("label",{staticClass:"report-text-params__label"},[t._v("\n                        Слов:\n                    ")]),t._v(" "),s("span",{staticClass:"report-text-params__value"},[t._v("\n                         "+t._s(t.report.params.wordsCount)+"\n                    ")])]),t._v(" "),s("li",{staticClass:"report-text-params__item"},[s("label",{staticClass:"report-text-params__label"},[t._v("\n                        Символов:\n                    ")]),t._v(" "),s("span",{staticClass:"report-text-params__value"},[t._v("\n                        "+t._s(t.report.params.symbols_count)+"\n                    ")])]),t._v(" "),s("li",{staticClass:"report-text-params__item"},[s("label",{staticClass:"report-text-params__label"},[t._v("\n                        Тип документа:\n                    ")]),t._v(" "),s("span",{staticClass:"report-text-params__value"},[t._v("\n                            "+t._s(t.check_unique.type)+"\n                    ")])])]),t._v(" "),s("div",{staticClass:"report-item-bnts"},[t.report.result?s("el-button",{attrs:{type:"primary"},on:{click:function(e){return e.preventDefault(),t.downloadPdf.apply(null,arguments)}}},[t._v("\n                    Скачать отчет\n                ")]):t._e()],1)])]),t._v(" "),s("report-send",{ref:"reportSend",attrs:{report:t.report},on:{"refresh-data":t.refreshData}})],1)}),[],!1,null,null,null).exports;const m={props:{report:{type:Object}},data:function(){return{showDetail:!1}},methods:{handleDetail:function(){this.showDetail=!this.showDetail},selectUrl:function(t){},copyUrl:function(t,e){var s=document.querySelector("#report_item_link_"+t);s.setAttribute("type","text"),s.select(),document.execCommand("copy"),s.setAttribute("type","hidden")}}};function f(t,e,s,r,i,n,a){try{var o=t[n](a),l=o.value}catch(t){return void s(t)}o.done?e(l):Promise.resolve(l).then(r,i)}const v={props:{check_unique:{},id:{}},components:{ReportItem:h,ReportDetail:(0,i.Z)(m,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"report-item-detail"},[s("div",{staticClass:"report-item-detail__heading"},[s("h3",{staticClass:"report-item-detail__title"},[t._v("\n            Заимствования\n        ")]),t._v(" "),t.showDetail?s("span",{staticClass:"report-item-detail__control",on:{click:t.handleDetail}},[t._v("\n            Свернуть\n             "),s("svg",{staticClass:"report-item-detail__icon",attrs:{viewBox:"0 0 10 10"}},[s("use",{attrs:{"xlink:href":"assets/site/images/sprites.svg?ver=17#sprite-arrow-dig-top"}})])]):s("span",{staticClass:"report-item-detail__control",on:{click:t.handleDetail}},[t._v("\n            Развернуть\n             "),s("svg",{staticClass:"report-item-detail__icon",attrs:{viewBox:"0 0 10 10"}},[s("use",{attrs:{"xlink:href":"assets/site/images/sprites.svg?ver=17#sprite-arrow-dig-bottom"}})])])]),t._v(" "),s("section",{staticClass:"report-item-detail__content report-item-detail-content",class:{"report-item-detail-content--open":t.showDetail}},[s("p",{staticClass:"report-item-detail-content__descr"},[t._v("\n            Нажмите на ссылку для подсвечивания заимствованного текста\n        ")]),t._v(" "),s("ul",{staticClass:"report-item-links"},t._l(t.report.data.urls,(function(e,r){return s("li",{staticClass:"report-item-links__item"},[s("section",{staticClass:"report-item-links__text",on:{click:function(s){return s.preventDefault(),t.selectUrl(e)}}},[s("span",{staticClass:"report-item-links__percent"},[t._v("\n                        "+t._s(e.plagiat+"%")+"\n                    ")]),t._v(" "),s("span",{staticClass:"report-item-links__url"},[t._v("\n                        "+t._s(e.url)+"\n                        "),s("input",{attrs:{type:"hidden",id:"report_item_link_"+r},domProps:{value:e.url}})])]),t._v(" "),s("figure",{directives:[{name:"title",rawName:"v-title",value:"Скопировать ссылку",expression:"'Скопировать ссылку'"}],staticClass:"report-item-links__icon",on:{click:function(s){return s.preventDefault(),t.copyUrl(r,e.url)}}},[s("svg",{attrs:{viewBox:"0 0 18 22"}},[s("use",{attrs:{"xlink:href":"/assets/site/images/sprites.svg?ver=17#sprite-copy"}})])])])})),0),t._v(" "),s("section",{staticClass:"report--item-detail-text"},[t._v("\n            "+t._s(t.report.data.clear_text)+"\n        ")])])])}),[],!1,null,null,null).exports},data:function(){return{loaded:!1,report:{}}},methods:{getReport:function(){var t,e=this;return(t=o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,axios.get("/api/report/"+e.id+"/show").then((function(t){e.report=t.data,e.loaded=!0,e.$root.isLoading=!1}));case 2:case"end":return t.stop()}}),t)})),function(){var e=this,s=arguments;return new Promise((function(r,i){var n=t.apply(e,s);function a(t){f(n,r,i,a,o,"next",t)}function o(t){f(n,r,i,a,o,"throw",t)}a(void 0)}))})()}},mounted:function(){this.$root.isLoading=!0,this.getReport()}};const g={components:{SystemsList:n,Report:(0,i.Z)(v,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"mb-4"},[t.loaded?s("report-item",{attrs:{report:t.report,check_unique:t.check_unique},on:{"refresh-data":t.getReport}}):t._e(),t._v(" "),t.report.result&&t.report.check_system.api_id?s("report-detail",{attrs:{report:t.report}}):t._e()],1)}),[],!1,null,null,null).exports},props:{id:{type:String}},data:function(){return{loaded:!1,selectedSystems:[],check_unique:{}}},methods:{getCheckUnique:function(){var t=this;axios.get("/api/check-unique/"+this.id+"/show").then((function(e){t.check_unique=e.data,t.loaded=!0,t.$root.isLoading=!1,t.check_unique.reports.forEach((function(e){t.selectedSystems.push(e.system_id)}))}))},setViewed:function(){axios.get("/api/admin/check-unique/"+this.id+"/show")}},mounted:function(){this.$route.meta.title=" Заявка №"+this.$route.params.id,this.$root.isLoading=!0,this.getCheckUnique(),this.setViewed()}};const x=(0,i.Z)(g,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-card",{staticClass:"box-card"},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("h5",[t._v("Заявка №"+t._s(t.id))])]),t._v(" "),s("div",{staticClass:"row mb-3"},[s("div",{staticClass:"col-md-6"},[s("label",[t._v("\n                E-mail:\n            ")]),t._v(" "),s("span",[t._v("\n                    "+t._s(t.check_unique.email)+"\n                ")])])]),t._v(" "),t.check_unique.filename?s("div",{staticClass:"mb-2"},[s("label",[t._v("Имя файла:")]),t._v(" "),s("span",[t._v(t._s(t.check_unique.filename))])]):t._e(),t._v(" "),s("label",[t._v("Текст:")]),t._v(" "),t.check_unique.filename?s("el-link",{attrs:{href:t.check_unique.file_link,icon:"el-icon-document",download:""}},[t._v("Скачать файл")]):s("div",{staticClass:"page-block mb-3"},[t._v("\n        "+t._s(t.check_unique.plainText)+"\n    ")]),t._v(" "),s("systems-list",{attrs:{selected:t.selectedSystems}}),t._v(" "),t._l(t.check_unique.reports,(function(e,r){return t.loaded?s("report",{key:e.id,attrs:{id:e.id,check_unique:t.check_unique}}):t._e()}))],2)}),[],!1,null,null,null).exports},54028:function(t){var e;e=function(){return function(t){var e={};function s(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,s),i.l=!0,i.exports}return s.m=t,s.c=e,s.d=function(t,e,r){s.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=0)}([function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VueSimpleProgress=void 0;var r,i=s(1),n=(r=i)&&r.__esModule?r:{default:r};"undefined"!=typeof window&&window.Vue&&Vue.component("vue-simple-progress",n.default),e.VueSimpleProgress=n.default,e.default=n.default},function(t,e,s){var r=s(2)(s(3),s(4),null,null);t.exports=r.exports},function(t,e){t.exports=function(t,e,s,r){var i,n=t=t||{},a=typeof t.default;"object"!==a&&"function"!==a||(i=t,n=t.default);var o="function"==typeof n?n.options:n;if(e&&(o.render=e.render,o.staticRenderFns=e.staticRenderFns),s&&(o._scopeId=s),r){var l=Object.create(o.computed||null);Object.keys(r).forEach((function(t){var e=r[t];l[t]=function(){return e}})),o.computed=l}return{esModule:i,exports:n,options:o}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return!isNaN(parseFloat(t))&&isFinite(t)};e.default={props:{val:{default:0},max:{default:100},size:{default:3},"bg-color":{type:String,default:"#eee"},"bar-color":{type:String,default:"#2196f3"},"bar-transition":{type:String,default:"all 0.5s ease"},"bar-border-radius":{type:Number,default:0},spacing:{type:Number,default:4},text:{type:String,default:""},"text-align":{type:String,default:"center"},"text-position":{type:String,default:"bottom"},"font-size":{type:Number,default:13},"text-fg-color":{type:String,default:"#222"}},computed:{pct:function(){var t=this.val/this.max*100;return t=t.toFixed(2),Math.min(t,this.max)},size_px:function(){switch(this.size){case"tiny":return 2;case"small":return 4;case"medium":return 8;case"large":return 12;case"big":return 16;case"huge":return 32;case"massive":return 64}return r(this.size)?this.size:32},text_padding:function(){switch(this.size){case"tiny":case"small":case"medium":case"large":case"big":case"huge":case"massive":return Math.min(Math.max(Math.ceil(this.size_px/8),3),12)}return r(this.spacing)?this.spacing:4},text_font_size:function(){switch(this.size){case"tiny":case"small":case"medium":case"large":case"big":case"huge":case"massive":return Math.min(Math.max(Math.ceil(1.4*this.size_px),11),32)}return r(this.fontSize)?this.fontSize:13},progress_style:function(){var t={background:this.bgColor};return"middle"!=this.textPosition&&"inside"!=this.textPosition||(t.position="relative",t["min-height"]=this.size_px+"px",t["z-index"]="-2"),this.barBorderRadius>0&&(t["border-radius"]=this.barBorderRadius+"px"),t},bar_style:function(){var t={background:this.barColor,width:this.pct+"%",height:this.size_px+"px",transition:this.barTransition};return this.barBorderRadius>0&&(t["border-radius"]=this.barBorderRadius+"px"),"middle"!=this.textPosition&&"inside"!=this.textPosition||(t.position="absolute",t.top="0",t.height="100%",t["min-height"]=this.size_px+"px",t["z-index"]="-1"),t},text_style:function(){var t={color:this.textFgColor,"font-size":this.text_font_size+"px","text-align":this.textAlign};return"top"!=this.textPosition&&"middle"!=this.textPosition&&"inside"!=this.textPosition||(t["padding-bottom"]=this.text_padding+"px"),"bottom"!=this.textPosition&&"middle"!=this.textPosition&&"inside"!=this.textPosition||(t["padding-top"]=this.text_padding+"px"),t}}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.text.length>0&&"top"==t.textPosition?s("div",{staticClass:"vue-simple-progress-text",style:t.text_style},[t._v(t._s(t.text))]):t._e(),t._v(" "),s("div",{staticClass:"vue-simple-progress",style:t.progress_style},[t.text.length>0&&"middle"==t.textPosition?s("div",{staticClass:"vue-simple-progress-text",style:t.text_style},[t._v(t._s(t.text))]):t._e(),t._v(" "),t.text.length>0&&"inside"==t.textPosition?s("div",{staticStyle:{position:"relative",left:"-9999px"},style:t.text_style},[t._v(t._s(t.text))]):t._e(),t._v(" "),s("div",{staticClass:"vue-simple-progress-bar",style:t.bar_style},[t.text.length>0&&"inside"==t.textPosition?s("div",{style:t.text_style},[t._v(t._s(t.text))]):t._e()])]),t._v(" "),t.text.length>0&&"bottom"==t.textPosition?s("div",{staticClass:"vue-simple-progress-text",style:t.text_style},[t._v(t._s(t.text))]):t._e()])},staticRenderFns:[]}}]).default},t.exports=e()}}]);
//# sourceMappingURL=751.2bb838.js.map