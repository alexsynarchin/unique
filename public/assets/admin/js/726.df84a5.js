"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[726],{50396:(e,t,n)=>{n.d(t,{Z:()=>v});var o,r=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],i=function(e){return-1!==r.map((function(e){return e.toLowerCase()})).indexOf(e.toLowerCase())},s=function(e,t,n){var o=t.$props.value?t.$props.value:"",r=t.$props.initialValue?t.$props.initialValue:"";n.setContent(o||(t.initialized?t.cache:r)),t.$watch("value",(function(e,o){n&&"string"==typeof e&&e!==o&&e!==n.getContent({format:t.$props.outputFormat})&&n.setContent(e)})),t.$listeners.input&&function(e,t){var n=e.$props.modelEvents?e.$props.modelEvents:null,o=Array.isArray(n)?n.join(" "):n;t.on(o||"change input undo redo",(function(){e.$emit("input",t.getContent({format:e.$props.outputFormat}))}))}(t,n),function(e,t,n){Object.keys(t).filter(i).forEach((function(o){var r=t[o];"function"==typeof r&&("onInit"===o?r(e,n):n.on(o.substring(2),(function(e){return r(e,n)})))}))}(e,t.$listeners,n),t.initialized=!0},a=0,l=function(e){var t=Date.now();return e+"_"+Math.floor(1e9*Math.random())+ ++a+String(t)},c=function(e){return void 0===e||""===e?[]:Array.isArray(e)?e:e.split(" ")},u=function(){return{listeners:[],scriptId:l("tiny-script"),scriptLoaded:!1}},m=(o=u(),{load:function(e,t,n){o.scriptLoaded?n():(o.listeners.push(n),e.getElementById(o.scriptId)||function(e,t,n,o){var r=t.createElement("script");r.referrerPolicy="origin",r.type="application/javascript",r.id=e,r.src=n;var i=function(){r.removeEventListener("load",i),o()};r.addEventListener("load",i),t.head&&t.head.appendChild(r)}(o.scriptId,e,t,(function(){o.listeners.forEach((function(e){return e()})),o.scriptLoaded=!0})))},reinitialize:function(){o=u()}}),p=function(){var e="undefined"!=typeof window?window:n.g;return e&&e.tinymce?e.tinymce:null},d={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],value:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(e){return"html"===e||"text"===e}}},f=function(){return f=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},f.apply(this,arguments)},h=function(e){return function(){var t,n,o,r=f(f({},e.$props.init),{readonly:e.$props.disabled,selector:"#"+e.elementId,plugins:(t=e.$props.init&&e.$props.init.plugins,n=e.$props.plugins,c(t).concat(c(n))),toolbar:e.$props.toolbar||e.$props.init&&e.$props.init.toolbar,inline:e.inlineEditor,setup:function(t){e.editor=t,t.on("init",(function(n){return s(n,e,t)})),e.$props.init&&"function"==typeof e.$props.init.setup&&e.$props.init.setup(t)}});null!==(o=e.element)&&"textarea"===o.tagName.toLowerCase()&&(e.element.style.visibility="",e.element.style.display=""),p().init(r)}};const v={props:d,created:function(){this.elementId=this.$props.id||l("tiny-vue"),this.inlineEditor=this.$props.init&&this.$props.init.inline||this.$props.inline,this.initialized=!1},watch:{disabled:function(){this.editor.setMode(this.disabled?"readonly":"design")}},mounted:function(){if(this.element=this.$el,null!==p())h(this)();else if(this.element&&this.element.ownerDocument){var e=this.$props.cloudChannel?this.$props.cloudChannel:"5",t=this.$props.apiKey?this.$props.apiKey:"no-api-key",n=null==this.$props.tinymceScriptSrc?"https://cdn.tiny.cloud/1/"+t+"/tinymce/"+e+"/tinymce.min.js":this.$props.tinymceScriptSrc;m.load(this.element.ownerDocument,n,h(this))}},beforeDestroy:function(){null!==p()&&p().remove(this.editor)},deactivated:function(){var e;this.inlineEditor||(this.cache=this.editor.getContent(),null===(e=p())||void 0===e||e.remove(this.editor))},activated:function(){!this.inlineEditor&&this.initialized&&h(this)()},render:function(e){return this.inlineEditor?function(e,t,n){return e(n||"div",{attrs:{id:t}})}(e,this.elementId,this.$props.tagName):function(e,t){return e("textarea",{attrs:{id:t},style:{visibility:"hidden"}})}(e,this.elementId)}}},95844:(e,t,n)=>{function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}n.d(t,{D:()=>r});var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.errors={}}var t,n,r;return t=e,(n=[{key:"has",value:function(e){return this.errors.hasOwnProperty(e)}},{key:"any",value:function(){return Object.keys(this.errors).length>0}},{key:"get",value:function(e){if(this.errors[e])return this.errors[e][0]}},{key:"getFlash",value:function(e){if(this.errors[e])return this.errors[e]}},{key:"record",value:function(e){this.errors=e}},{key:"clear",value:function(e){e?this.has(e)&&delete this.errors[e]:this.errors={}}}])&&o(t.prototype,n),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()},18146:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(94015),r=n.n(o),i=n(23645),s=n.n(i)()(r());s.push([e.id,".preview-uploader .el-upload{border:1px dashed #d9d9d9;border-radius:6px;cursor:pointer;overflow:hidden;position:relative}.preview-uploader .el-upload:hover{border-color:#409eff}.preview-uploader-icon{color:#8c939d;font-size:28px;height:280px;line-height:280px;text-align:center;width:280px}.preview{display:block;height:280px;width:280px}.ck-editor__editable{min-height:200px}","",{version:3,sources:["webpack://./resources/admin/js/views/static-pages/components/form.vue"],names:[],mappings:"AAyGA,6BACA,yBAAA,CACA,iBAAA,CACA,cAAA,CAEA,eAAA,CADA,iBAEA,CACA,mCACA,oBACA,CACA,uBAEA,aAAA,CADA,cAAA,CAGA,YAAA,CACA,iBAAA,CACA,iBAAA,CAHA,WAIA,CACA,SAGA,aAAA,CADA,YAAA,CADA,WAGA,CACA,qBACA,gBACA",sourcesContent:['<template>\n    <el-card class="box-card">\n        <el-form ref="form" :model="form" label-position="top" :rules="rules">\n            <el-tabs type="card" v-model="activeTab">\n                <el-tab-pane label="Основная информация" name="main">\n                    <div class="row">\n                        <el-form-item prop="name" label="Заголовок"  class="col-md-7">\n                            <el-input v-model="form.name"></el-input>\n                        </el-form-item>\n                        <el-form-item label="Опубликован" class="col-md-5"  prop="published" v-if="formAction != \'/api/admin/static-page/store\'">\n                            <el-checkbox v-model="form.active">Опубликован</el-checkbox>\n                        </el-form-item>\n                    </div>\n                    <div class="row">\n                        <el-form-item prop="slug" label="URL"  class="col-md-7" :error="errors.get(\'slug\')">\n                            <el-input v-model="form.slug"></el-input>\n                        </el-form-item>\n                    </div>\n                    <div class="row">\n                        <div class="col-md-12">\n                            <tinymce v-model="form.content.text"/>\n                        </div>\n                    </div>\n                </el-tab-pane>\n                <el-tab-pane label="Настройки и SEO" name="config">\n                    <Seo :form = "form.seo" v-if="form.seo"></Seo>\n                </el-tab-pane>\n            </el-tabs>\n            <div class="text-right mt-3">\n                <el-button type="success" @click="submitForm(\'form\')">Сохранить</el-button>\n                <el-button @click="closeModal">Отмена</el-button>\n            </div>\n        </el-form>\n    </el-card>\n</template>\n<script>\nimport { Errors } from  \'@/common/js/services/errors.js\';\nimport Seo from \'@/admin/js/components/seo/seo\';\nimport Tinymce from \'@/admin/js/components/Tinymce\';\nexport default {\n    props:[\'form\',\'formAction\'],\n    components: {\n        \'Seo\':Seo,\n        Tinymce\n    },\n    data() {\n        return {\n            activeTab: \'main\',\n            rules: {\n                name: [\n                    { required: true, message: \'Введите название страницы\', trigger: \'blur\' },\n                ],\n            },\n            buildings:[],\n            errors: new Errors(),\n        }\n    },\n    methods:{\n        prepareForm() {\n            if(this.form.type === \'about\') {\n                return this.form.blocks =  this.$refs.blocks.submitForm();\n            }\n            if(this.form.type === \'contest\') {\n                return this.form.blocks =  this.$refs.contest.submitForm();\n            }\n\n        },\n        async submitForm(formName) {\n            if(this.form.type === \'about\' || this.form.type === \'contest\') {\n                await this.prepareForm();\n                console.log(this.form.blocks)\n            }\n            this.$refs[formName].validate((valid) => {\n                if (valid) {\n                    this.$root.isLoading = true;\n                    axios({\n                        method: this.formAction.method ,\n                        url: this.formAction.url,\n                        data: this.form\n                    })\n                        .then((response) => {\n                            this.$root.isLoading = false;\n                            this.$emit(\'closeModal\',\'submit\')\n                        })\n                        .catch((error) => {\n                            this.$root.isLoading = false;\n                            this.errors.record(error.response.data.errors)\n                        })\n                } else {\n                    console.log(\'error submit!!\');\n                    return false;\n                }\n            });\n        },\n        closeModal() {\n            this.$emit(\'closeModal\',\'close\')\n        },\n\n    },\n    mounted() {\n\n    }\n}\n<\/script>\n<style >\n.preview-uploader .el-upload {\n    border: 1px dashed #d9d9d9;\n    border-radius: 6px;\n    cursor: pointer;\n    position: relative;\n    overflow: hidden;\n}\n.preview-uploader .el-upload:hover {\n    border-color: #409EFF;\n}\n.preview-uploader-icon {\n    font-size: 28px;\n    color: #8c939d;\n    width: 280px;\n    height: 280px;\n    line-height: 280px;\n    text-align: center;\n}\n.preview {\n    width: 280px;\n    height: 280px;\n    display: block;\n}\n.ck-editor__editable {\n    min-height: 200px;\n}\n</style>\n'],sourceRoot:""}]);const a=s},23052:(e,t,n)=>{n.d(t,{Z:()=>s});var o=n(50396);const r={height:600,plugins:"lists link image table code help wordcount template",toolbar:"undo redo | image link | formatselect | fontsizeselect | fontselect | lineheight | styles | bold italic alignleft aligncenter alignright alignjustify | bullist numlist outdent indent table forecolor backcolor  template",fontsize_formats:"8px 10px 12px 14px 16px 18px 24px 36px 48px",image_title:!0,automatic_uploads:!0,file_picker_types:"image",file_picker_callback:function(e,t,n){var o=document.createElement("input");o.setAttribute("type","file"),o.setAttribute("accept","image/*"),o.onchange=function(){var t=this.files[0],n=new FileReader;n.onload=function(){var o="blobid"+(new Date).getTime(),r=tinymce.activeEditor.editorUpload.blobCache,i=n.result.split(",")[1],s=r.create(o,t,i);r.add(s),e(s.blobUri(),{title:t.name})},n.readAsDataURL(t)},o.click()},language:"ru",content_css:"/assets/admin/css/tinymce.css",font_formats:"Geometria=geometria, sans-serif;  Andale Mono=andale mono,times; Arial=arial,helvetica,sans-serif; Arial Black=arial black,avant garde; Book Antiqua=book antiqua,palatino; Comic Sans MS=comic sans ms,sans-serif; Courier New=courier new,courier;Helvetica=helvetica; Impact=impact,chicago; Oswald=oswald; Symbol=symbol; Tahoma=tahoma,arial,helvetica,sans-serif; Terminal=terminal,monaco; Times New Roman=times new roman,times; Trebuchet MS=trebuchet ms,geneva; Verdana=verdana,geneva; Webdings=webdings; Wingdings=wingdings,zapf dingbats",templates:[{title:"Блок баннер",description:"",content:'<div class="container">\n   <section class="mp-banner">\n       <figure class="mp-banner__mobile-img">\n           <img src="/assets/site/images/mp/mp-banner-mobile.png">\n       </figure>\n       <div class="mp-banner__content">\n           <h3 class="mp-banner__title">\n               Проверить оригинальность текста\n\n           </h3>\n           <p class="mp-banner__text">\n               Бесплатные проверка уникальности и платные тарифы\n           </p>\n       </div>\n       <div class="mp-banner__action">\n           <a href="/#check_unique\'" class="btn button button--white">\n               Проверить уникальность\n           </a>\n       </div>\n\n   </section>\n</div>'},{title:"Кнопка проверить уникальность",description:"",content:'<a href="/#check_unique\'" class="btn button ">\n               Проверить уникальность\n           </a>'}],table_background_color_map:[{title:"Gray",value:"F0F1F6"},{title:"Orange",value:"FF9902"},{title:"Blue",value:"366AF3"}],color_map:["F0F1F6","Gray","FF9902","Orange","366AF3","Blue"]},i={props:{value:{type:String,default:""}},watch:{text:function(){this.$emit("input",this.text)}},data:function(){return{text:this.value,tinySettings:r}},components:{Editor:o.Z}};const s=(0,n(51900).Z)(i,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("Editor",{attrs:{"api-key":"n5vevbezoz59y0xm5lm9351k04wpcdlod46tt4h2ilw0x2er",init:e.tinySettings},model:{value:e.text,callback:function(t){e.text=t},expression:"text"}})}),[],!1,null,null,null).exports},2496:(e,t,n)=>{n.d(t,{Z:()=>r});const o={props:["form"],data:function(){return{}}};const r=(0,n(51900).Z)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-form",{attrs:{model:e.form,"label-position":"top"}},[n("el-form-item",{attrs:{label:"Title"}},[n("el-input",{model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"Description"}},[n("el-input",{attrs:{type:"textarea",rows:"5"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"Keywords"}},[n("el-input",{attrs:{type:"textarea",rows:"3"},model:{value:e.form.keywords,callback:function(t){e.$set(e.form,"keywords",t)},expression:"form.keywords"}})],1)],1)],1)}),[],!1,null,null,null).exports},94726:(e,t,n)=>{n.r(t),n.d(t,{default:()=>r});const o={components:{PageForm:n(56382).Z},data:function(){return{form:{title:"",slug:"",published:!0,content:{},seo:{}},formAction:{url:"/api/admin/static-page",method:"post"}}},methods:{closeModal:function(e){this.$emit("closeModal",e)}}};const r=(0,n(51900).Z)(o,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("page-form",{attrs:{form:e.form,formAction:e.formAction},on:{closeModal:e.closeModal}})}),[],!1,null,null,null).exports},56382:(e,t,n)=>{n.d(t,{Z:()=>f});var o=n(87757),r=n.n(o),i=n(95844),s=n(2496),a=n(23052);function l(e,t,n,o,r,i,s){try{var a=e[i](s),l=a.value}catch(e){return void n(e)}a.done?t(l):Promise.resolve(l).then(o,r)}const c={props:["form","formAction"],components:{Seo:s.Z,Tinymce:a.Z},data:function(){return{activeTab:"main",rules:{name:[{required:!0,message:"Введите название страницы",trigger:"blur"}]},buildings:[],errors:new i.D}},methods:{prepareForm:function(){return"about"===this.form.type?this.form.blocks=this.$refs.blocks.submitForm():"contest"===this.form.type?this.form.blocks=this.$refs.contest.submitForm():void 0},submitForm:function(e){var t,n=this;return(t=r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("about"!==n.form.type&&"contest"!==n.form.type){t.next=4;break}return t.next=3,n.prepareForm();case 3:console.log(n.form.blocks);case 4:n.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;n.$root.isLoading=!0,axios({method:n.formAction.method,url:n.formAction.url,data:n.form}).then((function(e){n.$root.isLoading=!1,n.$emit("closeModal","submit")})).catch((function(e){n.$root.isLoading=!1,n.errors.record(e.response.data.errors)}))}));case 5:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(o,r){var i=t.apply(e,n);function s(e){l(i,o,r,s,a,"next",e)}function a(e){l(i,o,r,s,a,"throw",e)}s(void 0)}))})()},closeModal:function(){this.$emit("closeModal","close")}},mounted:function(){}};var u=n(93379),m=n.n(u),p=n(18146),d={insert:"head",singleton:!1};m()(p.Z,d);p.Z.locals;const f=(0,n(51900).Z)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-card",{staticClass:"box-card"},[n("el-form",{ref:"form",attrs:{model:e.form,"label-position":"top",rules:e.rules}},[n("el-tabs",{attrs:{type:"card"},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[n("el-tab-pane",{attrs:{label:"Основная информация",name:"main"}},[n("div",{staticClass:"row"},[n("el-form-item",{staticClass:"col-md-7",attrs:{prop:"name",label:"Заголовок"}},[n("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),"/api/admin/static-page/store"!=e.formAction?n("el-form-item",{staticClass:"col-md-5",attrs:{label:"Опубликован",prop:"published"}},[n("el-checkbox",{model:{value:e.form.active,callback:function(t){e.$set(e.form,"active",t)},expression:"form.active"}},[e._v("Опубликован")])],1):e._e()],1),e._v(" "),n("div",{staticClass:"row"},[n("el-form-item",{staticClass:"col-md-7",attrs:{prop:"slug",label:"URL",error:e.errors.get("slug")}},[n("el-input",{model:{value:e.form.slug,callback:function(t){e.$set(e.form,"slug",t)},expression:"form.slug"}})],1)],1),e._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-12"},[n("tinymce",{model:{value:e.form.content.text,callback:function(t){e.$set(e.form.content,"text",t)},expression:"form.content.text"}})],1)])]),e._v(" "),n("el-tab-pane",{attrs:{label:"Настройки и SEO",name:"config"}},[e.form.seo?n("Seo",{attrs:{form:e.form.seo}}):e._e()],1)],1),e._v(" "),n("div",{staticClass:"text-right mt-3"},[n("el-button",{attrs:{type:"success"},on:{click:function(t){return e.submitForm("form")}}},[e._v("Сохранить")]),e._v(" "),n("el-button",{on:{click:e.closeModal}},[e._v("Отмена")])],1)],1)],1)}),[],!1,null,null,null).exports}}]);
//# sourceMappingURL=726.df84a5.js.map