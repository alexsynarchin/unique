"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[501],{79628:(e,t,n)=>{n.d(t,{Z:()=>o});var l=n(94015),a=n.n(l),s=n(23645),i=n.n(s)()(a());i.push([e.id,".el-table .warning-row{background:oldlace}.el-table .success-row{background:#f0f9eb}","",{version:3,sources:["webpack://./resources/admin/js/views/rewrites/index.vue"],names:[],mappings:"AAkGA,uBACA,kBACA,CAEA,uBACA,kBACA",sourcesContent:['<template>\n    <section>\n        <data-tables :data="rewrites" :table-props="tableProps">\n            <el-table-column\n                type="index"\n                label="№"\n            >\n            </el-table-column>\n            <el-table-column\n                label="Имя"\n                prop="name"\n                sortable\n            >\n            </el-table-column>\n            <el-table-column\n                label="e-mail"\n                prop="email"\n                sortable\n            >\n            </el-table-column>\n            <el-table-column\n                label="Статус"\n                prop="status_title"\n                sortable\n            >\n            </el-table-column>\n            <el-table-column\n                label="Дата"\n                prop="date"\n                sortable\n            >\n            </el-table-column>\n            <el-table-column\n                label="Действия"\n            >\n\n                <template slot-scope="scope">\n                    <el-button\n                        size="mini"\n                        type="primary"\n                        @click="handleShow(scope.row.id)">Подробнее</el-button>\n\n                </template>\n            </el-table-column>\n        </data-tables>\n        <el-dialog\n            title="Заявка на рерайт"\n            :visible.sync="dialogVisible"\n            width="90%"\n            :before-close="handleClose">\n            <show v-if="dialogVisible" :id="currentId"></show>\n        </el-dialog>\n    </section>\n</template>\n<script>\nimport Show from "./components/show";\nexport default {\n    components: {Show},\n    data() {\n        return {\n            CanAccess: \'Просмотр "Заявки на рерайт"\',\n            rewrites: [],\n            dialogVisible:false,\n            currentId:null,\n            type:null,\n            tableProps: {\n                "row-class-name": function (row) {\n\n                    if (row.row.status === 0) {\n                        return \'warning-row\';\n                    }\n                    return \'\'\n                }\n            },\n        }\n    },\n    methods: {\n        handleClose() {\n            this.dialogVisible = false;\n            this.currentId = false;\n        },\n        handleShow(id) {\n            this.currentId = id;\n            this.dialogVisible = true;\n        },\n        getRewrites() {\n            axios.get(\'/api/admin/rewrites\')\n                .then((response) => {\n                    this.rewrites = response.data;\n                })\n        },\n    },\n    mounted() {\n        this.getRewrites();\n    }\n}\n<\/script>\n<style>\n.el-table .warning-row {\n    background: oldlace;\n}\n\n.el-table .success-row {\n    background: #f0f9eb;\n}\n</style>\n'],sourceRoot:""}]);const o=i},24501:(e,t,n)=>{n.r(t),n.d(t,{default:()=>b});var l=n(87757),a=n.n(l);function s(e,t,n,l,a,s,i){try{var o=e[s](i),r=o.value}catch(e){return void n(e)}o.done?t(r):Promise.resolve(r).then(l,a)}const i={props:{id:{type:Number}},data:function(){return{statuses:[{label:"Не просмотрена",value:0},{label:"Новая",value:1},{label:"В работе",value:2},{label:"Завершена",value:3}],item:{},form:{price:0,status:0}}},methods:{getData:function(){var e=this;axios.get("/api/admin/rewrite/"+this.id).then((function(t){e.item=t.data;["price","status"].forEach((function(n){e.form[n]=t.data[n]}))}))},update:function(){var e=this;axios.put("/api/admin/rewrite/"+this.id,this.form).then((function(t){e.item=t.data,e.$notify({title:"Информация обновлена",type:"success"})}))}},mounted:function(){var e,t=this;return(e=a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getData();case 2:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(l,a){var i=e.apply(t,n);function o(e){s(i,l,a,o,r,"next",e)}function r(e){s(i,l,a,o,r,"throw",e)}o(void 0)}))})()}};var o=n(51900);const r={components:{Show:(0,o.Z)(i,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[n("el-card",{staticClass:"box-card mb-4"},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("h5",[e._v("Основная информация")])]),e._v(" "),n("div",{staticClass:"row mb-3"},[n("div",{staticClass:"col-md-6"},[n("label",[e._v("\n                    Имя:\n                ")]),e._v(" "),n("span",[e._v("\n                        "+e._s(e.item.name)+"\n                    ")])]),e._v(" "),n("div",{staticClass:"col-md-6"},[n("label",[e._v("\n                    E-mail:\n                ")]),e._v(" "),n("span",[e._v("\n                        "+e._s(e.item.email)+"\n                    ")])])]),e._v(" "),n("div",{staticClass:"row  mb-3"},[n("div",{staticClass:"col-md-6"},[n("label",[e._v("\n                    Необходимые сроки:\n                ")]),e._v(" "),n("span",[e._v("\n                        "+e._s(e.item.date)+"\n                    ")])]),e._v(" "),n("div",{staticClass:"col-md-6"},[n("label",[e._v("\n                    Статус:\n                ")]),e._v(" "),n("span",[e._v("\n                    "+e._s(e.item.status_title)+"\n                ")])])]),e._v(" "),n("div",{staticClass:"mb-4"},[n("label",[e._v("\n                Комментарий\n            ")]),e._v(" "),n("div",[e._v("\n                "+e._s(e.item.comment)+"\n            ")])]),e._v(" "),n("label",[e._v("Текст:")]),e._v(" "),e.item.filename?n("el-link",{attrs:{href:e.item.file_link,icon:"el-icon-document",download:""}},[e._v("Скачать файл")]):n("div",{staticClass:"page-block"},[e._v("\n            "+e._s(e.item.plain_text)+"\n        ")])],1),e._v(" "),n("el-form",{attrs:{model:e.form}},[n("div",{staticClass:"row"},[n("el-form-item",{staticClass:"col-md-4",attrs:{label:"Стоимость"}},[n("el-input-number",{model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",t)},expression:"form.price"}})],1),e._v(" "),n("el-form-item",{staticClass:"col-md-4",attrs:{label:"Статус"}},[n("el-select",{attrs:{placeholder:"Select"},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},e._l(e.statuses,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),n("div",{staticClass:"col-md-4"},[n("el-button",{attrs:{type:"success"},on:{click:function(t){return t.preventDefault(),e.update.apply(null,arguments)}}},[e._v("\n                    Сохранить\n                ")])],1)],1)])],1)}),[],!1,null,null,null).exports},data:function(){return{CanAccess:'Просмотр "Заявки на рерайт"',rewrites:[],dialogVisible:!1,currentId:null,type:null,tableProps:{"row-class-name":function(e){return 0===e.row.status?"warning-row":""}}}},methods:{handleClose:function(){this.dialogVisible=!1,this.currentId=!1},handleShow:function(e){this.currentId=e,this.dialogVisible=!0},getRewrites:function(){var e=this;axios.get("/api/admin/rewrites").then((function(t){e.rewrites=t.data}))}},mounted:function(){this.getRewrites()}};var c=n(93379),u=n.n(c),d=n(79628),m={insert:"head",singleton:!1};u()(d.Z,m);d.Z.locals;const b=(0,o.Z)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[n("data-tables",{attrs:{data:e.rewrites,"table-props":e.tableProps}},[n("el-table-column",{attrs:{type:"index",label:"№"}}),e._v(" "),n("el-table-column",{attrs:{label:"Имя",prop:"name",sortable:""}}),e._v(" "),n("el-table-column",{attrs:{label:"e-mail",prop:"email",sortable:""}}),e._v(" "),n("el-table-column",{attrs:{label:"Статус",prop:"status_title",sortable:""}}),e._v(" "),n("el-table-column",{attrs:{label:"Дата",prop:"date",sortable:""}}),e._v(" "),n("el-table-column",{attrs:{label:"Действия"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(n){return e.handleShow(t.row.id)}}},[e._v("Подробнее")])]}}])})],1),e._v(" "),n("el-dialog",{attrs:{title:"Заявка на рерайт",visible:e.dialogVisible,width:"90%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[e.dialogVisible?n("show",{attrs:{id:e.currentId}}):e._e()],1)],1)}),[],!1,null,null,null).exports}}]);
//# sourceMappingURL=501.059a3c.js.map