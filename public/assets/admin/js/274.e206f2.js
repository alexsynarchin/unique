"use strict";(self.webpackChunkunique=self.webpackChunkunique||[]).push([[274],{61445:(e,t,n)=>{n.d(t,{A:()=>h});var o,r=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],i=function(e){return-1!==r.map((function(e){return e.toLowerCase()})).indexOf(e.toLowerCase())},a=function(e,t,n){var o=t.$props.value?t.$props.value:"",r=t.$props.initialValue?t.$props.initialValue:"";n.setContent(o||(t.initialized?t.cache:r)),t.$watch("value",(function(e,o){n&&"string"==typeof e&&e!==o&&e!==n.getContent({format:t.$props.outputFormat})&&n.setContent(e)})),t.$listeners.input&&function(e,t){var n=e.$props.modelEvents?e.$props.modelEvents:null,o=Array.isArray(n)?n.join(" "):n;t.on(o||"change input undo redo",(function(){e.$emit("input",t.getContent({format:e.$props.outputFormat}))}))}(t,n),function(e,t,n){Object.keys(t).filter(i).forEach((function(o){var r=t[o];"function"==typeof r&&("onInit"===o?r(e,n):n.on(o.substring(2),(function(e){return r(e,n)})))}))}(e,t.$listeners,n),t.initialized=!0},s=0,l=function(e){var t=Date.now();return e+"_"+Math.floor(1e9*Math.random())+ ++s+String(t)},c=function(e){return void 0===e||""===e?[]:Array.isArray(e)?e:e.split(" ")},m=function(){return{listeners:[],scriptId:l("tiny-script"),scriptLoaded:!1}},u=(o=m(),{load:function(e,t,n){o.scriptLoaded?n():(o.listeners.push(n),e.getElementById(o.scriptId)||function(e,t,n,o){var r=t.createElement("script");r.referrerPolicy="origin",r.type="application/javascript",r.id=e,r.src=n;var i=function(){r.removeEventListener("load",i),o()};r.addEventListener("load",i),t.head&&t.head.appendChild(r)}(o.scriptId,e,t,(function(){o.listeners.forEach((function(e){return e()})),o.scriptLoaded=!0})))},reinitialize:function(){o=m()}}),p=function(){var e="undefined"!=typeof window?window:n.g;return e&&e.tinymce?e.tinymce:null},d={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],value:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(e){return"html"===e||"text"===e}}},f=function(){return f=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},f.apply(this,arguments)},v=function(e){return function(){var t,n,o,r=f(f({},e.$props.init),{readonly:e.$props.disabled,selector:"#"+e.elementId,plugins:(t=e.$props.init&&e.$props.init.plugins,n=e.$props.plugins,c(t).concat(c(n))),toolbar:e.$props.toolbar||e.$props.init&&e.$props.init.toolbar,inline:e.inlineEditor,setup:function(t){e.editor=t,t.on("init",(function(n){return a(n,e,t)})),e.$props.init&&"function"==typeof e.$props.init.setup&&e.$props.init.setup(t)}});null!==(o=e.element)&&"textarea"===o.tagName.toLowerCase()&&(e.element.style.visibility="",e.element.style.display=""),p().init(r)}};const h={props:d,created:function(){this.elementId=this.$props.id||l("tiny-vue"),this.inlineEditor=this.$props.init&&this.$props.init.inline||this.$props.inline,this.initialized=!1},watch:{disabled:function(){this.editor.setMode(this.disabled?"readonly":"design")}},mounted:function(){if(this.element=this.$el,null!==p())v(this)();else if(this.element&&this.element.ownerDocument){var e=this.$props.cloudChannel?this.$props.cloudChannel:"5",t=this.$props.apiKey?this.$props.apiKey:"no-api-key",n=null==this.$props.tinymceScriptSrc?"https://cdn.tiny.cloud/1/"+t+"/tinymce/"+e+"/tinymce.min.js":this.$props.tinymceScriptSrc;u.load(this.element.ownerDocument,n,v(this))}},beforeDestroy:function(){null!==p()&&p().remove(this.editor)},deactivated:function(){var e;this.inlineEditor||(this.cache=this.editor.getContent(),null===(e=p())||void 0===e||e.remove(this.editor))},activated:function(){!this.inlineEditor&&this.initialized&&v(this)()},render:function(e){return this.inlineEditor?function(e,t,n){return e(n||"div",{attrs:{id:t}})}(e,this.elementId,this.$props.tagName):function(e,t){return e("textarea",{attrs:{id:t},style:{visibility:"hidden"}})}(e,this.elementId)}}},49334:(e,t,n)=>{function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,i(o.key),o)}}function i(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}n.d(t,{I:()=>a});var a=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.errors={}},(t=[{key:"has",value:function(e){return this.errors.hasOwnProperty(e)}},{key:"any",value:function(){return Object.keys(this.errors).length>0}},{key:"get",value:function(e){if(this.errors[e])return this.errors[e][0]}},{key:"getFlash",value:function(e){if(this.errors[e])return this.errors[e]}},{key:"record",value:function(e){this.errors=e}},{key:"clear",value:function(e){e?this.has(e)&&delete this.errors[e]:this.errors={}}}])&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}()},20258:(e,t,n)=>{n.d(t,{A:()=>s});var o=n(54991),r=n.n(o),i=n(76314),a=n.n(i)()(r());a.push([e.id,".tox-tinymce-aux{z-index:9000!important}","",{version:3,sources:["webpack://./resources/admin/js/views/articles/components/form.vue"],names:[],mappings:"AAkJA,iBACA,sBACA",sourcesContent:['<template>\n    <el-card class="box-card">\n    <el-form :model="form" label-position="top">\n        <el-tabs type="card" v-model="activeTab">\n            <el-tab-pane label="Основная информация" name="main">\n                <div class="d-flex">\n                    <el-form-item prop="logo" label="Превью" style="margin-right: 20px">\n                        <el-upload\n                            action=""\n                            v-model="form.preview"\n                            class="avatar-uploader"\n                            :auto-upload="false"\n                            :show-file-list="false"\n                            :on-change="uploadImage"\n                        >\n                            <figure class="avatar" v-if="form.preview">\n                                <img  :src="form.preview" >\n                            </figure>\n                            <i v-else class="el-icon-plus avatar-uploader-icon"></i>\n                        </el-upload>\n                    </el-form-item>\n                    <div style="flex:1">\n                        <el-form-item prop="title" label="Название" :error="errors.get(\'title\')">\n                            <el-input v-model="form.title"/>\n                        </el-form-item>\n                        <el-form-item prop="slug"\n                                      label="Псевдоним (Если оставить поле пустым будет сгенерировано на основе названия статьи)"\n                                      :error="errors.get(\'slug\')">\n                            <el-input v-model="form.slug"/>\n                        </el-form-item>\n                        <div class="row">\n                            <el-form-item class="col-md-6"\n                                          prop="date" label="Дата"\n                                          :error="errors.get(\'date\')">\n                                <el-date-picker\n                                    v-model="form.date"\n                                    type="date"\n                                    format="dd-MM-yyyy"\n                                    value-format="yy-MM-dd"\n                                    placeholder="Выберите дату">\n                                </el-date-picker>\n                            </el-form-item>\n                            <el-form-item label="Опубликован" class="col-md-5"  prop="published">\n                                <el-checkbox v-model="form.published">Опубликован</el-checkbox>\n                            </el-form-item>\n                        </div>\n\n                        <el-form-item prop="text" label="Текст">\n                           <tinymce v-model="form.content.text"/>\n                        </el-form-item>\n\n                    </div>\n                </div>\n            </el-tab-pane>\n            <el-tab-pane label="Настройки и SEO" name="config">\n                <Seo :form = "form.seo" v-if="form.seo"></Seo>\n            </el-tab-pane>\n            </el-tabs>\n            <el-button type="success" @click.prevent="submitForm">Сохранить</el-button>\n        </el-form>\n    </el-card>\n</template>\n<script>\n\nimport { Errors } from  \'@/common/js/services/errors.js\';\nimport Seo from \'@/admin/js/components/seo/seo\';\nimport Tinymce from \'@/admin/js/components/Tinymce\';\n    export default {\n        components: {\n            \'Seo\':Seo,\n            Tinymce\n        },\n        props: {\n            saveMsg: {\n                default: \'Статья сохранена\'\n            },\n            form: {\n                type:Object,\n            },\n            formAction: {\n                type:Object\n            },\n        },\n        data() {\n            return {\n                activeTab:\'main\',\n                errors: new Errors(),\n            }\n        },\n        methods: {\n            submitForm() {\n                axios({\n                    method: this.formAction.method ,\n                    url: this.formAction.url,\n                    data: this.form\n                }).then((response) => {\n                    this.$message({\n                        message: this.saveMsg,\n                        type: \'success\'\n                    });\n                    this.$emit(\'submit\', response.data);\n                })\n                    .catch((error) => {\n                        this.errors.record(error.response.data.errors);\n                    })\n                ;\n\n            },\n            uploadImage(file){\n                let cond = this.beforeImageUpload(file.raw);\n                this.form.imageName = file.raw.name;\n                console.log(cond);\n                if(cond){\n                    this.createImage(file);\n                }\n            },\n\n            beforeImageUpload(file) {\n                const isJPG = file.type === \'image/jpeg\';\n                const isPNG = file.type === \'image/png\';\n                const isLt2M = file.size / 1024 / 1024 < 2;\n\n                if (!isJPG && !isPNG) {\n                    this.$message.error(\'Картинка должна быть в формате jpeg или png\');\n                }\n                if (!isLt2M) {\n                    this.$message.error(\'Размер не может превышать 2МБ\');\n                }\n                return (isJPG || isPNG) && isLt2M;\n            },\n\n            createImage(file) {\n                let reader = new FileReader();\n                let vm = this;\n                reader.onload = (e) => {\n                    vm.form.preview = e.target.result;\n                };\n                reader.readAsDataURL(file.raw);\n            },\n        },\n        mounted() {\n\n        }\n    }\n<\/script>\n<style>\n.tox-tinymce-aux {\n    z-index: 9000 !important;\n}\n</style>\n'],sourceRoot:""}]);const s=a},10747:(e,t,n)=>{n.d(t,{A:()=>a});var o=n(61445);const r={height:600,plugins:"lists link image table code help wordcount template",toolbar:"undo redo | image link | formatselect | fontsizeselect | fontselect | lineheight | styles | bold italic alignleft aligncenter alignright alignjustify | bullist numlist outdent indent table forecolor backcolor  template",fontsize_formats:"8px 10px 12px 14px 16px 18px 24px 36px 48px",image_title:!0,automatic_uploads:!0,file_picker_types:"image",file_picker_callback:function(e,t,n){var o=document.createElement("input");o.setAttribute("type","file"),o.setAttribute("accept","image/*"),o.onchange=function(){var t=this.files[0],n=new FileReader;n.onload=function(){var o="blobid"+(new Date).getTime(),r=tinymce.activeEditor.editorUpload.blobCache,i=n.result.split(",")[1],a=r.create(o,t,i);r.add(a),e(a.blobUri(),{title:t.name})},n.readAsDataURL(t)},o.click()},language:"ru",content_css:"/assets/admin/css/tinymce.css",font_formats:"Geometria=geometria, sans-serif;  Andale Mono=andale mono,times; Arial=arial,helvetica,sans-serif; Arial Black=arial black,avant garde; Book Antiqua=book antiqua,palatino; Comic Sans MS=comic sans ms,sans-serif; Courier New=courier new,courier;Helvetica=helvetica; Impact=impact,chicago; Oswald=oswald; Symbol=symbol; Tahoma=tahoma,arial,helvetica,sans-serif; Terminal=terminal,monaco; Times New Roman=times new roman,times; Trebuchet MS=trebuchet ms,geneva; Verdana=verdana,geneva; Webdings=webdings; Wingdings=wingdings,zapf dingbats",templates:[{title:"Блок баннер",description:"",content:'<div class="container">\n   <section class="mp-banner">\n       <figure class="mp-banner__mobile-img">\n           <img src="/assets/site/images/mp/mp-banner-mobile.png">\n       </figure>\n       <div class="mp-banner__content">\n           <h3 class="mp-banner__title">\n               Проверить оригинальность текста\n\n           </h3>\n           <p class="mp-banner__text">\n               Бесплатные проверка уникальности и платные тарифы\n           </p>\n       </div>\n       <div class="mp-banner__action">\n           <a href="/#check_unique\'" class="btn button button--white">\n               Проверить уникальность\n           </a>\n       </div>\n\n   </section>\n</div>'},{title:"Кнопка проверить уникальность",description:"",content:'<a href="/#check_unique\'" class="btn button ">\n               Проверить уникальность\n           </a>'}],table_background_color_map:[{title:"Gray",value:"F0F1F6"},{title:"Orange",value:"FF9902"},{title:"Blue",value:"366AF3"}],color_map:["F0F1F6","Gray","FF9902","Orange","366AF3","Blue"]},i={props:{value:{type:String,default:""}},watch:{text:function(){this.$emit("input",this.text)}},data:function(){return{text:this.value,tinySettings:r}},components:{Editor:o.A}};const a=(0,n(14486).A)(i,(function(){var e=this;return(0,e._self._c)("Editor",{attrs:{"api-key":"n5vevbezoz59y0xm5lm9351k04wpcdlod46tt4h2ilw0x2er",init:e.tinySettings},model:{value:e.text,callback:function(t){e.text=t},expression:"text"}})}),[],!1,null,null,null).exports},18393:(e,t,n)=>{n.d(t,{A:()=>r});const o={props:["form"],data:function(){return{}}};const r=(0,n(14486).A)(o,(function(){var e=this,t=e._self._c;return t("div",[t("el-form",{attrs:{model:e.form,"label-position":"top"}},[t("el-form-item",{attrs:{label:"Title"}},[t("el-input",{model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"Description"}},[t("el-input",{attrs:{type:"textarea",rows:"5"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"Keywords"}},[t("el-input",{attrs:{type:"textarea",rows:"3"},model:{value:e.form.keywords,callback:function(t){e.$set(e.form,"keywords",t)},expression:"form.keywords"}})],1)],1)],1)}),[],!1,null,null,null).exports},85274:(e,t,n)=>{n.r(t),n.d(t,{default:()=>r});const o={components:{ArticleForm:n(95246).A},data:function(){return{form:{title:"",preview:"",date:null,slug:"",published:!0,content:{},seo:{}},formAction:{url:"/api/admin/article",method:"post"}}},methods:{submit:function(e){this.$emit("store",e)}}};const r=(0,n(14486).A)(o,(function(){var e=this;return(0,e._self._c)("article-form",{attrs:{form:e.form,"form-action":e.formAction},on:{submit:e.submit}})}),[],!1,null,null,null).exports},95246:(e,t,n)=>{n.d(t,{A:()=>u});var o=n(49334),r=n(18393),i=n(10747);const a={components:{Seo:r.A,Tinymce:i.A},props:{saveMsg:{default:"Статья сохранена"},form:{type:Object},formAction:{type:Object}},data:function(){return{activeTab:"main",errors:new o.I}},methods:{submitForm:function(){var e=this;axios({method:this.formAction.method,url:this.formAction.url,data:this.form}).then((function(t){e.$message({message:e.saveMsg,type:"success"}),e.$emit("submit",t.data)})).catch((function(t){e.errors.record(t.response.data.errors)}))},uploadImage:function(e){var t=this.beforeImageUpload(e.raw);this.form.imageName=e.raw.name,console.log(t),t&&this.createImage(e)},beforeImageUpload:function(e){var t="image/jpeg"===e.type,n="image/png"===e.type,o=e.size/1024/1024<2;return t||n||this.$message.error("Картинка должна быть в формате jpeg или png"),o||this.$message.error("Размер не может превышать 2МБ"),(t||n)&&o},createImage:function(e){var t=new FileReader,n=this;t.onload=function(e){n.form.preview=e.target.result},t.readAsDataURL(e.raw)}},mounted:function(){}};var s=n(85072),l=n.n(s),c=n(20258),m={insert:"head",singleton:!1};l()(c.A,m);c.A.locals;const u=(0,n(14486).A)(a,(function(){var e=this,t=e._self._c;return t("el-card",{staticClass:"box-card"},[t("el-form",{attrs:{model:e.form,"label-position":"top"}},[t("el-tabs",{attrs:{type:"card"},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[t("el-tab-pane",{attrs:{label:"Основная информация",name:"main"}},[t("div",{staticClass:"d-flex"},[t("el-form-item",{staticStyle:{"margin-right":"20px"},attrs:{prop:"logo",label:"Превью"}},[t("el-upload",{staticClass:"avatar-uploader",attrs:{action:"","auto-upload":!1,"show-file-list":!1,"on-change":e.uploadImage},model:{value:e.form.preview,callback:function(t){e.$set(e.form,"preview",t)},expression:"form.preview"}},[e.form.preview?t("figure",{staticClass:"avatar"},[t("img",{attrs:{src:e.form.preview}})]):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),t("div",{staticStyle:{flex:"1"}},[t("el-form-item",{attrs:{prop:"title",label:"Название",error:e.errors.get("title")}},[t("el-input",{model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),e._v(" "),t("el-form-item",{attrs:{prop:"slug",label:"Псевдоним (Если оставить поле пустым будет сгенерировано на основе названия статьи)",error:e.errors.get("slug")}},[t("el-input",{model:{value:e.form.slug,callback:function(t){e.$set(e.form,"slug",t)},expression:"form.slug"}})],1),e._v(" "),t("div",{staticClass:"row"},[t("el-form-item",{staticClass:"col-md-6",attrs:{prop:"date",label:"Дата",error:e.errors.get("date")}},[t("el-date-picker",{attrs:{type:"date",format:"dd-MM-yyyy","value-format":"yy-MM-dd",placeholder:"Выберите дату"},model:{value:e.form.date,callback:function(t){e.$set(e.form,"date",t)},expression:"form.date"}})],1),e._v(" "),t("el-form-item",{staticClass:"col-md-5",attrs:{label:"Опубликован",prop:"published"}},[t("el-checkbox",{model:{value:e.form.published,callback:function(t){e.$set(e.form,"published",t)},expression:"form.published"}},[e._v("Опубликован")])],1)],1),e._v(" "),t("el-form-item",{attrs:{prop:"text",label:"Текст"}},[t("tinymce",{model:{value:e.form.content.text,callback:function(t){e.$set(e.form.content,"text",t)},expression:"form.content.text"}})],1)],1)],1)]),e._v(" "),t("el-tab-pane",{attrs:{label:"Настройки и SEO",name:"config"}},[e.form.seo?t("Seo",{attrs:{form:e.form.seo}}):e._e()],1)],1),e._v(" "),t("el-button",{attrs:{type:"success"},on:{click:function(t){return t.preventDefault(),e.submitForm.apply(null,arguments)}}},[e._v("Сохранить")])],1)],1)}),[],!1,null,null,null).exports}}]);
//# sourceMappingURL=274.e206f2.js.map